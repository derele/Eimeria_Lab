write.csv(recordTableExpe009, "../data/3_recordingTables/Exp009_CRYPTO.csv",
row.names = F, quote = F)
?magrittr
library(RCurl)
OV <- read.csv("./Eimeria_Lab_overview.csv")
OV <- read.csv(text = getURL("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/Eimeria_Lab_overview.csv"))
View(OV)
loadFromGH <- function(URL){
if(url.exists(URL)){
U <- getURL(URL)
read.csv(text = U)
} else {
message("URL \"", URL, "\" does not exist")
}
}
E139W <- lapply(OV[OV$E139, "weight"], loadFromGH)
View(E139W)
View(OV)
View(E139W)
E139W <- E139W[!unlist(lapply(E139W, is.null))]
Reduce(intersect, lapply(E139W, colnames))
View(E139W)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,2,4,7,9,11,14,16,18,21,23,25), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
View(makeRecordTable)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,1,2,3,4,5,6,7,8,9,10,11,12), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
relative_weight = "",
feces_weight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,1,2,3,4,5,6,7,8,9,10,11,12), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
relative_weight = "",
feces_weight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 3, paste, collapse = ""), nrow(recordTable))
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
pathToInfoTable <- "~/GitHub/Eimeria_Lab/data/Experimental_design/E7_112018_Eim_DESIGN.csv"
lastEH_ID <- "LM0226"
infection_isolate <- c(rep("E64", 4), rep("E88", 4))
infoTable = read.csv(pathToInfoTable)
Nmice = nrow(infoTable)
num = as.numeric(sub("LM", "", lastEH_ID))
num = num + (1:(Nmice))
EH_ID = paste0("LM", sprintf("%04d", num))
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
54/2
infection_isolate <- c(rep("E64", 27), rep("E88", 27))
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
infoTable$EH_ID <- sample(EH_ID)
finaldesignTable <- merge(infoTable, designTable)
View(designTable)
infoTable = read.csv(text = getURL("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experimental_design/E7_112018_Eim_DESIGN.csv"))
lastEH_ID <- "LM0226"
infection_isolate <- c(rep("E64", 27), rep("E88", 27))
Nmice = nrow(infoTable)
num = as.numeric(sub("LM", "", lastEH_ID))
num = num + (1:(Nmice))
EH_ID = paste0("LM", sprintf("%04d", num))
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
infoTable$EH_ID <- sample(EH_ID)
finaldesignTable <- merge(infoTable, designTable)
View(finaldesignTable)
View(designTable)
View(finaldesignTable)
q()
source("~/Documents/GitHub/Eimeria_Lab/R/Joining_p4_p3_Challenge.R", echo=TRUE)
#load libraries
library(tidyr)
library(dplyr)
#load the challenge infection table
Challenge <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_p4_p3.csv")
View(Challenge)
#load the facs data for P4
P4_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_FACS.csv")
View(P4_FACS)
#load the facs data for P4
P4_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_FACS.csv") %>%
select(!X)
View(P4_FACS)
#load the E57 Facs data
E57_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_FACS.csv")
View(E57_FACS)
#load the E57 Facs data
E57_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_FACS.csv") %>%
select(!X)
#load the E11 FACS data
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv")
View(E11_FACS)
#load the E11 FACS data
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X)
#load the E11 FACS data
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv")
#load the E11 FACS data
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X)
View(E11_FACS)
#load the E11 FACS data
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X) %>%
select(!X.1)
View(E11_FACS)
View(Challenge)
View(E11_FACS)
library(tidyverse)
library(purrr)
library(purrr)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(y, by = c(names_common(x, y)))
}
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_FACS <- list(P4_FACS, E57_FACS, E11_FACS) %>%
reduce(left_join)
View(Challenge_FACS)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(x, by = c(names_common(x, y)))
}
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
FACS_combined <- list(P4_FACS, E57_FACS, E11_FACS) %>%
reduce(left_join)
x %>%
left_join(y, by = c(names_common(x, y)))
View(E11_FACS)
View(E11_FACS)
View(E57_FACS)
View(P4_FACS)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_FACS <- list(Challenge, P4_FACS, E57_FACS, E11_FACS) %>%
reduce(left_join)
View(FACS_combined)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_FACS <- list(Challenge, P4_FACS, E57_FACS, E11_FACS) %>%
reduce(join_my_tables)
View(Challenge_FACS)
View(E57_FACS)
#write a function to change LM_ to LM
#write a function to replace LM_ with LM
replace_LM <- function (x) {
str_replace_all(x$EH_ID, "LM_", "LM")
}
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
View(E11_FACS)
View(E57_FACS)
View(E57_FACS)
View(P4_FACS)
?apply
#replace LM_ to LM in all the tables
list(P4_FACS, E57_FACS, E11_FACS) %>%
lapply(replace_LM)
View(E11_FACS)
View(E57_FACS)
View(P4_FACS)
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
E57_FACS$EH_ID <- replace_LM(E57_FACS)
E11_FACS$EH_ID <- replace_LM(E11_FACS)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
View(Challenge_FACS)
View(E11_FACS)
View(E57_FACS)
View(P4_FACS)
View(Challenge_FACS)
#write the table
write.csv(Challenge_FACS, "~/data_products/Challenge_FACS", row.names = FALSE)
#write the table
write.csv(Challenge_FACS, "~/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS", row.names = FALSE)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
#write the table
write.csv(Challenge_FACS, "~/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS.csv", row.names = FALSE)
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv")
View(P4_infection)
E1_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E1_012017_Eim_CEWE_qPCR.csv")
View(E1_infection)
E1_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E1_012017_Eim_CEWE_qPCR.csv") %>%
select(!X)
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv") %>%
select(!X)
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv")
View(E57_infection)
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv") %>%
select(!X)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv")
View(P3_infection)
View(P3_infection)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv") %>%
select(!X)
View(P4_infection)
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
E57_FACS$EH_ID <- replace_LM(E57_FACS)
E11_FACS$EH_ID <- replace_LM(E11_FACS)
P4_infection$EH_ID <- replace_LM(P4_infection)
E1_infection$EH_ID <- replace_LM(E1_infection)
E57_infection$EH_ID <- replace_LM(E57_infection)
P3_infection$EH_ID <- replace_LM(P3_infection)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
View(E57_FACS)
View(P4_infection)
Challenge_FACS <- list(Challenge, P4_FACS, E57_FACS, E11_FACS, P4_infection, E1_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
View(P4_FACS)
View(P4_infection)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
View(E1_infection)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
View(Challenge_FACS_intensity)
#load libraries
library(tidyr)
library(dplyr)
library(tidyverse)
library(purrr)
#load the challenge infection table
Challenge <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_p4_p3.csv")
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv")
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv") %>%
select(!X)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv") %>%
select(!X)
#load the facs data for P4, E57, E11
P4_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_FACS.csv") %>%
select(!X)
E57_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_FACS.csv") %>%
select(!X)
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X) %>%
select(!X.1)
#write a function to change LM_ to LM
#write a function to replace LM_ with LM
replace_LM <- function (x) {
str_replace_all(x$EH_ID, "LM_", "LM")
}
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
E57_FACS$EH_ID <- replace_LM(E57_FACS)
E11_FACS$EH_ID <- replace_LM(E11_FACS)
P4_infection$EH_ID <- replace_LM(P4_infection)
E57_infection$EH_ID <- replace_LM(E57_infection)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(y, by = c(names_common(x, y)))
}
Challenge_FACS_intensity <- list(Challenge, P4_FACS, E57_FACS, E11_FACS, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
View(Challenge_FACS_intensity)
#write the table
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS_intensity.csv", row.names = FALSE)
#write the table
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS_intensity.csv", row.names = FALSE)
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS_intensity.csv", row.names = FALSE)
write.csv(Challenge_FACS_intensity, "~/Documents/Documents/GitHub/Eimeria_Lab/data_products/Challenge_FACS_intensity.csv", row.names = FALSE)
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/FACS_intensity", row.names = FALSE)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/FACS_intensity.csv", row.names = FALSE)
challengep3 <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_FACS.csv")
View(challengep3)
View(E57_infection)
View(P3_infection)
View(P3_infection)
View(P3_infection)
View(E57_infection)
View(P3_infection)
View(P4_infection)
View(P3_infection)
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_intensity <- list(Challenge, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
str(P4_infection)
str(E57_infection)
str(P3_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
E57_infection$Eim_MC <- as.character(E57_infection$Eim_MC)
str(E57_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
E57_infection$Eim_MC <- as.logical(E57_infection$Eim_MC)
str(E57_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
E57_infection$Eim_MC <- as.logical(E57_infection$Eim_MC)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(y, by = c(names_common(x, y)))
}
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_intensity <- list(Challenge, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
Challenge_FACS_intensity <- list(Challenge, P4_FACS, E57_FACS, E11_FACS, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/FACS_intensity.csv", row.names = FALSE)
#load libraries
library(tidyr)
library(dplyr)
library(tidyverse)
library(purrr)
#load the challenge infection table
Challenge <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_p4_p3.csv")
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv")
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv") %>%
select(!X)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv") %>%
select(!X)
#load the facs data for P4, E57, E11
P4_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_FACS.csv") %>%
select(!X)
E57_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_FACS.csv") %>%
select(!X)
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X) %>%
select(!X.1)
#write a function to change LM_ to LM
#write a function to replace LM_ with LM
replace_LM <- function (x) {
str_replace_all(x$EH_ID, "LM_", "LM")
}
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
E57_FACS$EH_ID <- replace_LM(E57_FACS)
E11_FACS$EH_ID <- replace_LM(E11_FACS)
P4_infection$EH_ID <- replace_LM(P4_infection)
E57_infection$EH_ID <- replace_LM(E57_infection)
P3_infection$EH_ID <- replace_LM(P3_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
E57_infection$Eim_MC <- as.logical(E57_infection$Eim_MC)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(y, by = c(names_common(x, y)))
}
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_intensity <- list(Challenge, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
View(Challenge_intensity)
str(E57_infection)
str(P4_infection)
str(P3_infection)
Challenge_FACS_intensity <- list(Challenge_intensity, P4_FACS, E57_FACS, E11_FACS) %>%
reduce(join_my_tables)
View(Challenge_FACS_intensity)
colnames(Challenge_FACS_intensity)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv") %>%
select(!X)
View(P3_infection)
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv")
View(P4_FACS)
View(P4_infection)
View(E57_FACS)
View(E57_infection)
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv") %>%
select(!X)
View(E57_infection)
str(E57_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
P4_infection$Eim_MC <- as.character(P4_infection$Eim_MC)
View(P4_infection)
source("~/Documents/GitHub/Eimeria_Lab/R/Facs_Challenge.R", echo=TRUE)
challengep3 <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_FACS.csv")
View(Challenge_FACS_intensity)
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_intensity <- list(Challenge, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
Challenge_FACS_intensity <- list(Challenge_intensity, P4_FACS, E57_FACS, E11_FACS) %>%
reduce(join_my_tables)
View(Challenge_intensity)
View(Challenge_intensity)
View(Challenge_FACS_intensity)
#load libraries
library(tidyr)
library(dplyr)
library(tidyverse)
library(purrr)
#load the challenge infection table
Challenge <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data_products/Challenge_p4_p3.csv")
#load the infection intensity data
P4_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_CEWE_qPCR.csv")
E57_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_CEWE_qPCR.csv") %>%
select(!X)
P3_infection <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P3_112019_Eim_CEWE_qPCR.csv") %>%
select(!X)
#load the facs data for P4, E57, E11
P4_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/P4_082020_Eim_FACS.csv") %>%
select(!X)
E57_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E7_112018_Eim_FACS.csv") %>%
select(!X)
E11_FACS <- read.csv("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experiment_results/E11_012021_Eim_FACS.csv") %>%
select(!X) %>%
select(!X.1)
#write a function to change LM_ to LM
#write a function to replace LM_ with LM
replace_LM <- function (x) {
str_replace_all(x$EH_ID, "LM_", "LM")
}
#replace LMs
P4_FACS$EH_ID <- replace_LM(P4_FACS)
E57_FACS$EH_ID <- replace_LM(E57_FACS)
E11_FACS$EH_ID <- replace_LM(E11_FACS)
P4_infection$EH_ID <- replace_LM(P4_infection)
E57_infection$EH_ID <- replace_LM(E57_infection)
P3_infection$EH_ID <- replace_LM(P3_infection)
#Eim_MC in some infection intensity column is a character and in others is logical
#change it so it is the same
P4_infection$Eim_MC <- as.character(P4_infection$Eim_MC)
#write a function to create a list of common column names
names_common <- function(x, y) {
intersect(colnames(x), colnames(y))
}
#write a function to left join
join_my_tables <- function (x, y) {
x %>%
left_join(y, by = c(names_common(x, y)))
}
#try to use the reduce to bind the tables together
#reduce works like apply, but you need to have a list for it to work on
Challenge_intensity <- list(Challenge, P4_infection, E57_infection, P3_infection) %>%
reduce(join_my_tables)
Challenge_FACS_intensity <- list(Challenge_intensity, P4_FACS, E57_FACS, E11_FACS) %>%
reduce(join_my_tables)
colnames(Challenge_FACS_intensity)
write.csv(Challenge_FACS_intensity, "~/Documents/GitHub/Eimeria_Lab/data_products/FACS_intensity.csv", row.names = FALSE)
